<!doctype html>
<html lang="en" ng-app="app">

<head>
  <title>NodeJS | Angular 1.5 | Bootstrap 4</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Referenciando o Socket -->
  <!-- Referenciando o Socket -->
  <script src="/socket.io/socket.io.js"></script>
<!-- Importando o Bootstrap 4 -->
<link rel="script" href="bootstrap/dist/js/bootstrap.min.js">
<link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css">
<!-- Importando o Angular 1.5.11 -->
<script src="angular/angular.min.js"></script>
<!-- Importando o arquivo JS que implementa o controlador -->
<script src="query6.js"></script>
<!-- Importando o arquivo de estilo CSS -->
<link href="index.css" rel="stylesheet">
<!-- <script src="font-awesome/css/font-awesome.css"></script> -->
<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
</head>

<body ng-controller="AppCtrl as vm">
  <h1 class="title">Introdução a Banco de Dados</h1>
  <div class="container index">

    <div style="display:flex;justify-content:space-between;">
      <button ng-click=vm.previous() class="btn btn-success"type="button" name="button"><i class="fa fa-arrow-left"></i> Anterior</button>
      <div class="dropdown">
        <button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown">
    Queries
  </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <h6 class="dropdown-header">Seleção e Projeção</h6>
          <a class="dropdown-item" href="query1.html">Query 1</a>
          <a class="dropdown-item" href="query2.html">Query 2</a>
          <h6 class="dropdown-header">Junção de 2 relações</h6>
          <a class="dropdown-item" href="query3.html">Query 3</a>
          <a class="dropdown-item" href="query4.html">Query 4</a>
          <a class="dropdown-item" href="query5.html">Query 5</a>
          <h6 class="dropdown-header">Junção 3 ou mais relações</h6>
          <a class="dropdown-item" href="query6.html">Query 6</a>
          <a class="dropdown-item" href="query7.html">Query 7</a>
          <a class="dropdown-item" href="query8.html">Query 8</a>
          <h6 class="dropdown-header">Agregação de Junção 2 ou mais relações</h6>
          <a class="dropdown-item" href="query9.html">Query 9</a>
          <a class="dropdown-item" href="query10.html">Query 10</a>
        </div>
      </div>
      <button ng-click=vm.next() class="btn btn-success"type="button" name="button">Próxima <i class="fa fa-arrow-right"></i> </button>
    </div>
    <div class="alert alert-primary query-title">
      <h1>Query 6</h1>
    </div>
    <div class="alert alert-primary">
      <p>Esta consulta exibe o nome de todos os órgãos que pagaram multa em 2017</p>
      <div style="display:flex;justify-content:space-between;">
        <p style="display:inline;">Retorna 13 entradas</p>
        <a ng-show="vm.arrow" ng-click="vm.arrow=false" style="display:inline; color:white;" class="btn btn-dark" data-toggle="collapse" data-target=".multi-collapse">
          Mostrar Query <i class="fa fa-arrow-down"></i>
        </a>
        <a ng-hide="vm.arrow" ng-click="vm.arrow=true" style="display:inline; color:white;" class="btn btn-dark" data-toggle="collapse" data-target=".multi-collapse">
          Ocultar Query <i class="fa fa-arrow-up"></i>
        </a>
      </div>

      <div style="margin-top:10px;" class="collapse multi-collapse" id="showQuery">
        <div class="alert alert-danger">
          SELECT DISTINCT org.name FROM organizations as org INNER JOIN orders as ord ON ord.organization_id = org.id INNER JOIN fines as fn ON fn.order_id = ord.id WHERE ord.issued_at BETWEEN "2017-01-01"AND "2017-12-31"LIMIT 0, 1000
        </div>
      </div>

      <div style="margin-top:10px;" class="collapse multi-collapse" id="showQuery">
        <div class="alert alert-secondary">
          SELECT name FROM organizations WHERE id IN ( SELECT ord.organization_id FROM orders AS ord INNER JOIN fines AS fn ON fn.order_id = ord.id WHERE ord.issued_at BETWEEN "2017-01-01"AND "2017-12-31") LIMIT 0, 1000
        </div>
      </div>
    </div>

    <nav style="float:right;">
      <ul class="pagination">
        <li class="page-item"><a class="page-link" ng-click=vm.decrementPage(vm.page)>Previous</a></li>
        <li class="page-item"><a class="page-link" ng-click="vm.queriesArray(1)">1</a></li>
        <li class="page-item"><a class="page-link" ng-click=vm.incrementPage(vm.page)>Next</a></li>
      </ul>
    </nav>

    <table class="table table-striped table-dark">
      <thead>
        <tr>
          <th scope="col" class="table-number">#</th>
          <th scope="col">Órgão</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="item in vm.array">
          <td>{{item.index}}</td>
          <td>{{item.name}}</td>
        </tr>
      </tbody>
    </table>

  </div>


  <!-- Importando JQuery3.2.1, Popper e plugins JavaScript -->
  <script src="/jquery/dist/jquery.min.js"></script>
   <script src="/popper.js/dist/umd/popper.min.js"></script>
   <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
</body>

</html>
